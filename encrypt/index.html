<!DOCTYPE html>
<html>
<head>
	<link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Encrypt a Message</title>
<style>
body {
	margin: 0;
}

#title {
  font-family: "Lobster";
	padding: 20px 0;
	background: #D7263D;
	color: #fff;
	margin: 0;
	font-weight: 400;
	font-size: 2em;
}

.container, .header {
	width: 50%;
	margin: 0 auto;
}

.container {
	margin-top: 10px;
	clear: both;
}

.col {
	float: left;
}

.result {
	height: 250px;
	padding: 20px;
	margin-top: 10px;
	margin-bottom: 30px;
	border: 3px dashed #1B998B;
	font-family: courier;
	font-size: 13.333px;
	box-sizing: border-box;
}

form input, form textarea {
	display: block;
	margin: 10px;
	margin-left: 0;
	padding: 10px;
	font-family: courier;
	border: 3px solid #2E294E;
}

form button {
	font-family: courier;
	color: #D7263D;
	background: #fff;
	border: 3px solid #D7263D;
	padding: 10px;
	transition: 0.3s ease;
	margin-bottom: 20px;
}

form button:hover {
	cursor: pointer;
	color: white;
	background: #D7263D;
}

form input:focus, form textarea:focus, form button:focus {
  outline: none;
}

@media (max-width: 1000px){
	.container, .header {
		width: 90%;	
	}
}
</style>
</head>
<body>
	<h3 id="title"><div class="header">Encrypt a Message</div></h3>
	<div class="container">
		<div class="col">
		  <form action="javascript:void(0)">
				<textarea class="col" name="message" placeholder="Enter some text you would like to encrypt/decrypt." cols="30" rows="10" id="textInput"></textarea>
				<div class="col">
					<input id="keyInput" placeholder="Enter a secret key." autocomplete="off">
					<button onclick="cipher(1)">Encrypt</button>
					<button onclick="cipher(2)">Decrypt</button>
				</div>
			</form>
		</div>
	</div>
	
	<div class="container result" id="result"></div>
<script id="jsbin-javascript">
var chars = "aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ1234567890 .,/:;".split(""),
		textInput = document.getElementById("textInput"),
		keyInput = document.getElementById("keyInput"),
		resultDiv = document.getElementById("result");

function cipher(s){
	var newMessage = "", i, m, k, letter, newLetter, keyLetter, letterIndex;
	
	try {
		m = textInput.value;
		k = keyInput.value;
		if (!m || !k) throw "Error - You must have a valid key and message.";
		for (i = 0; i < m.length; i++){
			letter = m[i];
			keyLetter = k[i % k.length];
			if (chars.indexOf(letter) !== -1){
				if (s == 1){
					newLetter = chars[(chars.indexOf(letter) + chars.indexOf(keyLetter)) % chars.length];
					newMessage += newLetter;
				}
				if (s == 2){
					letterIndex = chars.indexOf(letter) - chars.indexOf(keyLetter);
					newLetter = chars[((letterIndex % chars.length)+chars.length) % chars.length];
					newMessage += newLetter;
				}
			} else {
				newMessage += letter;
			}
		}
	} catch(err){
		newMessage = err;	
	}
	
	resultDiv.innerHTML = newMessage;
}


</script>
</body>
</html>
