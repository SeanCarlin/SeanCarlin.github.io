<!DOCTYPE html>
<html>
<head>
	<title>Encrypt a Message</title>
</head>
<body>
	
<script>
var chars = "aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ1234567890., ".split(""),
		textInput = document.getElementById("textInput"),
		keyInput = document.getElementById("keyInput"),
		resultDiv = document.getElementById("result");

function cipher(m, k, s){
	var newMessage = "", i, letter, newLetter, keyLetter, letterIndex;
	
	try {
		if (!m && !k) throw "";
		if (!m || !k) throw "Error - You must have a valid key and message.";
		for (i = 0; i < m.length; i++){
			letter = m[i];
			keyLetter = k[i % k.length];
			if (chars.indexOf(letter) !== -1){
				if (s == 1){
					newLetter = chars[(chars.indexOf(letter) + chars.indexOf(keyLetter)) % chars.length];
					newMessage += newLetter;
				}
				if (s == 2){
					letterIndex = chars.indexOf(letter) - chars.indexOf(keyLetter);
					newLetter = chars[((letterIndex % chars.length)+chars.length) % chars.length];
					newMessage += newLetter;
				}
			} else {
				newMessage += letter;
			}
		}
	} catch(err){
		newMessage = err;	
	}
	
	console.log(newMessage);
}

</script>
</body>
</html>
